<div class="jumbotron sub-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
               
               
               <div class="sub-header"><div>Find beauty products at an affordable price.</div></div>
               
                <form ng-submit="search()">
                    <input type="text" ng-model="form.query" style="width:401px; height:40px;"/>
                    <input type="submit" value="Search" style="height:40px;" />
                </form>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-3">
        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-7">

                <!-- merchants -->
                <h4>Store</h4>
                <div ng-repeat="merchant in merchants |orderBy:'count':true | limitTo:storeLimit">

                    <input id="{{merchant.name}}" type="checkbox" value="{{merchant.id}}" ng-checked="storeSelection.indexOf(merchant.id) > -1" ng-click="toggleStoreSelection(merchant.id)" />
                    <label for="{{merchant.name}}"></label>
                    <a ng-click="toggleStoreSelection(merchant.id)"><span class="filter">{{merchant.name}} ({{merchant.count}})</span></a>


                    <!-- <input type="checkbox" ng-model="selections.ids[merchant]" name="group" id="{{merchant.id}}" /><span class="filter">{{merchant.name}} ({{merchant.count}})</span> -->
                    <!--    <input type="checkbox" name="stores" ng-model="formData.stores.merchant.id"> Red {{merchant.id}} <a ng-click="filter(merchant,'merchant')"><span class="filter">{{merchant.name}} ({{merchant.count}})</span></a>-->
                </div>
                <div ng-show="!storeFullyExpanded()">
                    <a href style="text-decoration:underline;" ng-click="incrementStoreLimit()">more</a>
                </div>
                <div ng-show="storePartiallyExpanded()">
                    <a href style="text-decoration:underline;" ng-click="decrementStoreLimit()">less</a>
                </div>
                

                <!-- brands -->
                <div class="top-buffer"></div>
                <h4>Brand</h4>
                <div ng-repeat="brand in brands | orderBy:'count':true | limitTo:brandLimit">
                   
                   
                   <input id="{{brand.name}}" type="checkbox" value="{{brand.id}}" ng-checked="brandSelection.indexOf(brand.id) > -1" ng-click="toggleBrandSelection(brand.id)" />
                    <label for="{{brand.name}}"></label>
                    <a ng-click="toggleBrandSelection(brand.id)"><span class="filter">{{brand.name}} ({{brand.count}})</span></a>
                    
                    
                    <!--
                    <a ng-click="filter(brand,'brand')"><span class="filter">{{brand.name}} ({{brand.count}})</span></a>
                    -->
                </div>
                <div ng-show="!brandFullyExpanded()">
                    <a href style="text-decoration:underline;" ng-click="incrementBrandLimit()">more</a>
                </div>
                <div ng-show="brandPartiallyExpanded()">
                    <a href style="text-decoration:underline;" ng-click="decrementBrandLimit()">less</a>
                </div>

                <!-- prices -->
                <!--
                <div class="top-buffer"></div>
                <div>Price</div>
                <div ng-repeat="brand in brands">
                    {{brand.name}} ({{brand.count}})
                </div>
                -->
            </div>
            <div class="col-md-1"></div>
        </div>
    </div>
    <div class="col-md-9 container">
        <div class="panel panel-default panel-order">
            <div class="panel-heading">
                <!--
                <div ng-repeat="name in selection" class="selected-item">
                    {{name}}
                </div>
                -->
                <div class="results-summary">
                    <div ng-show="checkSomething()">You searched for: {{keyword}}.</div>Showing page {{currentPage}} of {{total}} results from {{num_merchants}} stores</div>

            </div>
            <div class="panel-body">
                <div ng-repeat="product in products.products.product" class="row top-buffer">
                    <div class="col-md-2">
                        <a ng-click="selectItem(product);">
                            <img ng-src="{{product.image_url_large}}" height="60%" width="60%" />
                        </a>
                    </div>
                    <div class="col-md-8">
                        <div class="row top-buffer">
                            <div class="col-md-12">
                                <span><strong><a style="text-decoration:underline; color:#FF6699;" ng-click="selectItem(product);">{{product.name}}<a/></strong></span>
                            </div>
                            <div class="col-md-12">
                                <span>{{ product.description | characters:400 }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="row top-buffer">
                            <div class="col-md-12">
                                Â£ {{product.price_min}} - {{product.price_max}}
                            </div>
                            <div class="col-md-12">
                                <a ng-click="selectItem(product);">
                                    <button type="button" class="btn btn-success" style="background-color:#FF6699; border-color:#FF6699;">Compare offers</button>
                                </a>
                            </div>
                            <div class="col-md-12">
                                {{product.offers.count}} stores
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="panel-footer">
                <pagination total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" max-size=5 items-per-page=10 boundary-links="true"></pagination>
            </div>
        </div>
    </div>
</div>